# NBA Simulator - Master Data Inventory

**Auto-generated by DIMS** (Data Inventory Management System)

## Metadata

- **Version:** 1.1.0
- **Last Updated:** November 04, 2025
- **Last Verified:** 2025-11-04T21:32:50Z
- **Last Audit:** 2025-11-04T21:29:28Z
- **Verified By:** DIMS Verification + Data Audit
- **System:** DIMS v3.1.0
- **Status:** ‚úÖ Post-Refactoring Validation Complete
- **Notes:** Updated after Phase 6-7 refactoring completion (Nov 4, 2025)

## S3 Storage

### Summary

- **Total Objects:** 172,726 (verified via DIMS)
- **Total Size:** 118.26 GB (verified via DIMS)
- **hoopR Parquet Files:** 96

### Current Data Holdings (Nov 4, 2025 Audit)

| Data Type | S3 Files | Local Files | Sync Status |
|-----------|----------|-------------|-------------|
| Play-by-Play | 44,826 | 44,826 | ‚úÖ In Sync |
| Box Scores | 44,836 | 44,828 | ‚ö†Ô∏è 8 file difference |
| Team Stats | 46,101 | 46,093 | ‚ö†Ô∏è 8 file difference |
| Schedule | 11,633 | 11,633 | ‚úÖ In Sync |
| **TOTAL** | **147,396** | **147,380** | ‚ö†Ô∏è 16 files out of sync |

### Verification

| Metric | Value | Last Verified | Method |
|--------|-------|---------------|--------|
| Total Objects | 172,726 | 2025-11-04T21:31:15Z | DIMS + aws_cli |
| Total Size GB | 118.26 GB | 2025-11-04T21:31:15Z | DIMS + aws_cli |
| hoopR Files | 96 | 2025-11-04T21:31:15Z | DIMS + aws_cli |

### Sync Issues Detected

‚ö†Ô∏è **Minor sync discrepancies** (non-critical):
- Box Scores: S3 has 8 more files than local
- Team Stats: S3 has 8 more files than local

**Resolution:** Run sync commands if needed:
```bash
aws s3 sync s3://nba-sim-raw-data-lake/box_scores/ data/nba_box_score/
aws s3 sync s3://nba-sim-raw-data-lake/team_stats/ data/nba_team_stats/
```

## Prediction System

**Total Lines of Code:** 2,103

### Scripts

| Script | Lines | Path |
|--------|-------|------|
| Fetch Upcoming Games | 303 | `scripts/ml/fetch_upcoming_games.py` |
| Fetch Recent Player Data | 341 | `scripts/ml/fetch_recent_player_data.py` |
| Prepare Upcoming Game Features | 416 | `scripts/ml/prepare_upcoming_game_features.py` |
| Predict Upcoming Games | 367 | `scripts/ml/predict_upcoming_games.py` |
| Train Model For Predictions | 359 | `scripts/ml/train_model_for_predictions.py` |
| Demo Predictions | 181 | `scripts/ml/demo_predictions.py` |
| Daily Predictions Sh | 136 | `scripts/ml/daily_predictions.sh` |

## Plus/Minus System

**Total Lines:** 5,988

### Components

- **Python:** 1,616 lines
- **SQL:** 2,318 lines
- **Documentation:** 2,054 lines

### Python Scripts

| Script | Lines | Path |
|--------|-------|------|
| Plus Minus Calculator | 497 | `scripts/pbp_to_boxscore/plus_minus_calculator.py` |
| Populate Plus Minus Tables | 767 | `scripts/pbp_to_boxscore/populate_plus_minus_tables.py` |
| Demo Plus Minus Population | 352 | `scripts/pbp_to_boxscore/demo_plus_minus_population.py` |

### Documentation

**Total Documentation Lines:** 2,054

| Document | Lines |
|----------|-------|
| PLUS_MINUS_ML_INTEGRATION.md | 262 |
| PLUS_MINUS_IMPLEMENTATION_SUMMARY.md | 508 |
| PLUS_MINUS_OPTIMIZATION_SUMMARY.md | 325 |
| REC_11_PLUS_MINUS_COMPLETION_SUMMARY.md | 245 |
| PLUS_MINUS_RDS_DEPLOYMENT_SUCCESS.md | 234 |
| REC_11_PLUS_MINUS_INTEGRATION.md | 480 |

## Code Base

### Overview (Post-Refactoring - Nov 4, 2025)

- **Total Python Files:** 1,878 (+37 from refactoring, 2.01% drift)
- **Test Files:** 673 (+5 from refactoring, 0.75% drift)
- **ML Scripts:** 56
- **Phase 2 Scripts:** 40

### Refactoring Impact

**Phase 6-7 Refactoring (Oct-Nov 2025):**
- ‚úÖ Created 8 autonomous agents (`nba_simulator/agents/`)
- ‚úÖ Refactored ETL modules (extractors, loaders, transformers, validators)
- ‚úÖ Added comprehensive test infrastructure (255+ tests)
- ‚úÖ Workflow orchestration framework (`nba_simulator/workflows/`)
- ‚úÖ DIMS integration and metrics tracking

**Files Added:**
- Agent modules: ~10 files
- ETL refactoring: ~15 files
- Test suites: ~20 files
- Workflow infrastructure: ~5 files

**DIMS Drift Status:** ‚úÖ MINOR (within acceptable 15% threshold)

## Documentation

- **Markdown Files:** 1,680
- **Total Size:** 31 MB

## Git Metrics

- **Book Recommendation Commits:** 214
  - Commits for book recommendation implementations (Oct 2025)

## Workflows

- **Total Workflow Files:** 60
- **Directory:** `docs/claude_workflows/workflow_descriptions/`

## SQL Schemas

**Total Lines:** 754

### Schema Files

| File | Lines |
|------|-------|
| `sql/master_schema.sql` | 468 |
| `sql/phase9_box_score_snapshots.sql` | 286 |

## Local Data

- **ESPN Data Size:** 843 GB
- **Path:** `/Users/ryanranft/0espn`
- **Note:** Multi-sport data (not NBA-only)

## RDS Database

- **Database Size:** 2.49 GB (verified via DIMS)
- **Allocated Storage:** 20 GB
- **Status:** ‚úÖ Available
- **Monthly Cost:** $29.88/month (estimated)

## Data Gaps

**Current Gaps Identified (from DIMS):**
- **Missing Games:** 0 (all games in database have basic data)
- **Games Without PBP:** [Not yet computed - requires gap analysis script]

**Note:** Full gap analysis requires implementing specialized audit scripts per Phase 0.0022 specification.

---

## Post-Refactoring Validation Summary

**Date:** November 4, 2025, 21:32 CDT
**Validation Type:** Quick Post-Refactoring Check (Option A)

### Results

‚úÖ **Data Audit:**
- Local data: 147,380 files ‚úÖ
- S3 data: 147,396 files ‚úÖ
- RDS: Available ‚úÖ
- Minor sync issues: 16 files (0.01% difference) ‚ö†Ô∏è

‚úÖ **DIMS Verification:**
- Metrics verified: 34/35 (97.1%) ‚úÖ
- Status OK: 32 metrics ‚úÖ
- Minor drift: 2 metrics (Python files, test files) ‚ö†Ô∏è
- All drift within acceptable thresholds ‚úÖ

### Health Status

| Component | Status | Notes |
|-----------|--------|-------|
| S3 Storage | ‚úÖ HEALTHY | 172,726 objects, 118.26 GB |
| RDS Database | ‚úÖ HEALTHY | 2.49 GB, available |
| Local Data | ‚úÖ HEALTHY | 147,380 files |
| Sync Status | ‚ö†Ô∏è MINOR | 16 files out of sync (0.01%) |
| Code Base | ‚úÖ HEALTHY | Refactoring complete, tests pass |
| DIMS Metrics | ‚úÖ HEALTHY | 97.1% verification rate |

### Recommendations

1. ‚úÖ **Refactoring Validated** - All systems operational post-refactoring
2. ‚ö†Ô∏è **Optional Sync** - Run S3 sync commands to resolve 16-file discrepancy
3. üìä **DIMS Update** - Update DIMS baselines to reflect new file counts (normal post-refactoring)
4. üìã **Future Work** - Consider implementing comprehensive gap analysis scripts (Phase 0.0022 full spec)

---

*Last generated: 2025-11-04T21:32:50Z*
*Audit log: `/Users/ryanranft/nba-simulator-aws/logs/audit/audit_20251104_212857.log`*
