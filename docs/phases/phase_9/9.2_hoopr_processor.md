# Sub-Phase 9.2: hoopR Play-by-Play Processor

**Status:** ⏸️ PENDING
**Priority:** HIGH
**Timeline:** 2 weeks
**Dependencies:** 9.1 (ESPN processor - reuse architecture)
**Started:** Not started
**Completed:** Not completed

---

## Objective

Build processor for hoopR play-by-play data from RDS PostgreSQL. Cross-validate with ESPN-generated box scores for data quality assessment.

---

## Input Data

**Source:** RDS PostgreSQL `hoopr_play_by_play` table (13M rows)
**Date Range:** 2002-2025 (focus on 2023-2025 for validation)
**Format:** PostgreSQL rows

---

## Key Differences from ESPN

- Different event type classifications
- Different player ID system (requires mapping)
- May have different granularity
- RDS source instead of S3

---

## Implementation Approach

1. Adapt ESPN processor architecture for hoopR data structure
2. Create player ID mapping table (hoopR ID ↔ ESPN ID)
3. Handle hoopR-specific event types
4. Cross-validate with ESPN results

---

## Cross-Validation Strategy

```python
def cross_validate_sources(game_id: str):
    """Compare ESPN and hoopR generated box scores"""
    espn_box_score = espn_processor.process_game(game_id)
    hoopr_box_score = hoopr_processor.process_game(game_id)
    
    # Compare final snapshots
    differences = compare_box_scores(
        espn_box_score[-1],
        hoopr_box_score[-1]
    )
    
    # Determine which source is more accurate
    if differences['total_diff'] < threshold:
        return 'both_accurate'
    else:
        return determine_better_source(differences)
```

---

## Success Criteria

- ✅ Process 2023-2025 hoopR games
- ✅ Cross-validation with ESPN <3% difference
- ✅ Player ID mapping complete
- ✅ Documentation of source quality differences

---

## References

- **Complete Plan**: `~/Downloads/pbp_to_boxscore_plan.md` - Section 8.2
- **Code Location**: `scripts/pbp_to_boxscore/hoopr_processor.py`

---

**Status:** Ready after 9.1 complete
**Next Action:** Adapt ESPN processor, create ID mappings

