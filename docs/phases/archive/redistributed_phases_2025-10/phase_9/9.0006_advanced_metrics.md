# Sub-Phase 9.0006: Advanced Metrics Layer

**Status:** ⏸️ PENDING
**Priority:** MEDIUM
**Timeline:** 2-3 weeks
**Dependencies:** 9.5 (need stored snapshots)
**Started:** Not started
**Completed:** Not completed

---

## Objective

Add advanced metrics not in original box scores to enhance ML prediction accuracy.

---

## Metrics to Implement

### Efficiency Metrics
- True Shooting % (TS%)
- Effective FG% (eFG%)
- Player Efficiency Rating (PER) - per snapshot
- Usage Rate
- Assist Ratio

### Advanced Stats
- Offensive Rating (ORtg)
- Defensive Rating (DRtg)
- Net Rating
- Pace (possessions per game)
- Four Factors (shooting, turnovers, rebounding, FT rate)

### Context Stats
- Win Probability at each snapshot
- Expected Points Added (EPA)
- Clutch performance (last 5 min of close games)
- Garbage time filtering

### Situational Stats
- Stats by quarter
- Home vs. Away splits
- Back-to-back game indicator
- Rest days since last game

---

## Implementation

Compute after base box scores verified, store in separate tables/columns, version metrics.

---

## Success Criteria

- ✅ All efficiency metrics implemented
- ✅ Advanced stats calculated per snapshot
- ✅ Context stats for ML features
- ✅ Documentation of formulas

---

## References

- **Complete Plan**: `~/Downloads/pbp_to_boxscore_plan.md` - Section 8.6

---

**Status:** Ready after 9.5 complete











---

## How This Phase Enables the Simulation Vision

This phase provides critical infrastructure that powers the **hybrid econometric + nonparametric simulation system** described in the [main README](../../../README.md#simulation-methodology).

**What this phase enables:**

### 1. Econometric Causal Inference Foundation

This phase supports econometric causal inference:

**Panel data infrastructure:**
- Enables fixed effects and random effects estimation
- Supports instrumental variables (IV) regression
- Facilitates propensity score matching

**Causal identification:**
- Provides data for difference-in-differences estimation
- Enables regression discontinuity designs
- Supports synthetic control methods

**Treatment effect estimation:**
- Heterogeneous treatment effects across subgroups
- Time-varying treatment effects in dynamic panels
- Robustness checks and sensitivity analysis

### 2. Nonparametric Event Modeling (Distribution-Free)

This phase supports nonparametric event modeling:

**Empirical distributions:**
- Kernel density estimation for irregular events
- Bootstrap resampling from observed data
- Empirical CDFs without parametric assumptions

**Distribution-free methods:**
- No assumptions on functional form
- Direct sampling from empirical distributions
- Preserves tail behavior and extreme events

### 3. Context-Adaptive Simulations

Using this phase's capabilities, simulations adapt to:

**Game context:**
- Score differential and time remaining
- Playoff vs. regular season
- Home vs. away venue

**Player state:**
- Fatigue levels and minute load
- Recent performance trends
- Matchup-specific adjustments

### 4. Integration with Main README Methodology

**Panel data regression (Main README: Lines 81-87):**
- This phase supports panel data regression infrastructure

**Nonparametric validation (Main README: Line 116):**
- This phase supports nonparametric validation infrastructure

**Monte Carlo simulation (Main README: Line 119):**
- This phase supports Monte Carlo simulation infrastructure

**See [main README](../../../README.md) for complete methodology.**

---
