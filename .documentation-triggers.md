# Documentation Update Triggers

<!-- AUTO-UPDATE TRIGGER: When new documentation files are created OR trigger logic changes -->
<!-- LAST UPDATED: 2025-10-01 -->
<!-- FREQUENCY: As needed (when adding new docs or modifying automation) -->
<!-- REMINDER: Update tables when new files get triggers, update "Maintenance" section when trigger logic changes -->

**Purpose:** Central registry of all documentation files with embedded update triggers. This file helps Claude Code automatically know when documentation needs updating without manual reminders.

**Last Updated:** 2025-10-01

---

## How This Works

Each documentation file listed below has an HTML comment trigger in its header that specifies:
1. **When** the file should be updated (the triggering event)
2. **How often** it should be updated
3. **What command** to run (if automated)

Claude Code reads these triggers at session start and reminds you when updates are needed.

---

## Automated Documentation (Scripts Available)

These files can be updated automatically using scripts:

| File | Trigger Event | Command | Frequency | Last Run |
|------|---------------|---------|-----------|----------|
| `FILE_INVENTORY.md` | Before every `git add .` | `make inventory` | Pre-commit | Auto-detected |
| `.session-history.md` | After every commit | `bash scripts/shell/session_startup.sh >> .session-history.md` | Post-commit | Auto-detected |
| `MACHINE_SPECS.md` | Start of every session | `bash scripts/shell/session_startup.sh` | Daily | Auto-detected |

**Automation Status:** ✅ All automated files have scripts in `scripts/shell/` and `scripts/maintenance/`

---

## Manual Documentation (Requires Human Decision)

These files require manual updates because they involve decisions, prose, or architectural reasoning:

| File | Trigger Event | Update Frequency | Status Checked By | Has Trigger? |
|------|---------------|------------------|-------------------|--------------|
| `COMMAND_LOG.md` | After every code file creation/modification, failed command, or error resolution | Real-time | `session_startup.sh` | ✅ Yes |
| `PROGRESS.md` | After completing any task | Real-time | `session_startup.sh` | ✅ Yes |
| `QUICKSTART.md` | When daily workflow changes (new commands, file locations, workflow shortcuts) | As needed | `session_startup.sh` (staleness) | ✅ Yes |
| `TROUBLESHOOTING.md` | After solving new error (>10 min to solve OR non-obvious solution) | As needed | `session_startup.sh` (staleness) | ✅ Yes |
| `STYLE_GUIDE.md` | When code style pattern used 3+ times (establishes precedent) | As needed | `session_startup.sh` (staleness) | ✅ Yes |
| `.documentation-triggers.md` | When new documentation files created OR trigger logic changes | As needed | Manual review | ✅ Yes |
| `docs/adr/*.md` | After architectural decision | As needed | CLAUDE.md instructions | ❌ No |
| `TESTING.md` | When testing strategy evolves | As needed | `session_startup.sh` (staleness) | ❌ No |
| `.env.example` | When new env variables needed | As needed | Manual review | ❌ No |

**Update Protocol:** Claude will prompt you when these files need updating based on context (e.g., "Should I add this solution to TROUBLESHOOTING.md?")

---

## Status Check Integration

### Session Startup (`scripts/shell/session_startup.sh`)

The session startup script automatically checks:
- ✓ FILE_INVENTORY.md age (warns if > 7 days)
- ✓ .session-history.md existence and entry count
- ✓ COMMAND_LOG.md existence and session count
- ✓ PROGRESS.md task status (pending/in progress)
- ✓ Stale documentation (warns if > 30 days)

**Run at every session start:** `bash scripts/shell/session_startup.sh`

### Weekly Maintenance (`make update-docs`)

Automated weekly tasks:
- Update timestamps in documentation
- Update cost estimates
- Update statistics
- Validate internal links
- Generate FILE_INVENTORY.md

**Run weekly:** `make update-docs`

### Monthly Review Checklist

1. Run all automation: `make update-docs`, `make sync-progress`, `make check-costs`
2. Review files 30+ days old (flagged by `session_startup.sh`)
3. Verify PROGRESS.md phases match reality
4. Check cost estimates vs actuals
5. Commit: `git commit -m "Monthly documentation refresh - $(date +%Y-%m)"`

---

## Trigger Syntax

Each file with a trigger uses this HTML comment format:

```markdown
<!-- AUTO-UPDATE TRIGGER: [Event description] -->
<!-- LAST UPDATED: [Date] -->
<!-- FREQUENCY: [How often] -->
<!-- REMINDER: [Action to take] -->
```

**Why HTML comments?**
- Invisible to human readers in rendered markdown
- Easily parseable by scripts and Claude Code
- Don't clutter the documentation
- Can be read at session start

---

## Adding New Triggers

When creating new documentation files that need update reminders:

1. **Add trigger header** to the file (immediately after title):
   ```markdown
   # File Title

   <!-- AUTO-UPDATE TRIGGER: [When to update] -->
   <!-- LAST UPDATED: [Date] -->
   <!-- FREQUENCY: [How often] -->
   <!-- REMINDER: [What to do] -->
   ```

2. **Add entry to this registry** (`.documentation-triggers.md`)

3. **Update `session_startup.sh`** if automated checking is needed

4. **Update `CLAUDE.md`** if Claude should proactively remind

---

## Quick Reference Commands

```bash
# Check all documentation status
bash scripts/shell/session_startup.sh

# Update file inventory before commit
make inventory

# Append session snapshot after commit
bash scripts/shell/session_startup.sh >> .session-history.md

# Weekly maintenance
make update-docs

# Check AWS costs
make check-costs

# Verify PROGRESS.md matches AWS reality
make sync-progress
```

---

## File Locations

- **This registry:** `.documentation-triggers.md` (project root)
- **Startup script:** `scripts/shell/session_startup.sh`
- **Maintenance scripts:** `scripts/maintenance/`
- **Claude instructions:** `CLAUDE.md`
- **Weekly automation:** `Makefile` (see `make help`)

---

## Maintenance

**This file should be updated when:**
- New documentation files are created
- New automation scripts are added
- Trigger logic changes
- Session startup checks are modified

**Review frequency:** Monthly (along with other documentation)

---

**Next Review:** 2025-11-01